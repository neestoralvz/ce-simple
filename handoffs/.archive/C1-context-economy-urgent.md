# Context Economy System - URGENT Implementation

**Updated**: 2025-07-24 12:54 (Mexico City)  
**Priority**: CRITICAL - Start next session here  
**Purpose**: Mathematical framework for cognitive load management

## Startup Instructions (READ FIRST)

**üî¥ IMMEDIATE ACTIONS on session start:**
1. Read `/Users/nalve/ce-simple/CLAUDE.md` completely
2. Read `/Users/nalve/ce-simple/docs/rules/communication-rules.md` 
3. Read `/Users/nalve/ce-simple/docs/core/development-principles.md` (focus on PTS Tier 0)
4. Add all 8 tasks below to TodoWrite before starting work

## Problem Statement

**Root Cause**: Current CLAUDE.md (147 lines) + CLAUDE_RULES.md (179 lines) + auto-loaded context causing cognitive overload and erratic LLM behavior throughout conversations.

**Impact**: 
- Inconsistent responses during sessions
- Over-complex proposals (violating KISS/PTS principles)
- Token budget exhaustion
- Poor adherence to established rules

## Critical Tasks (All High Priority)

### 1. Context Load Analysis
**ID**: `context-economy-analysis`
**Task**: Count actual tokens in currently auto-loaded files
**Method**: Analyze CLAUDE.md + CLAUDE_RULES.md + any imports + system context
**Deliverable**: Exact token count with breakdown by file

### 2. Token Budget Calculation  
**ID**: `token-budget-calculation`
**Task**: Determine maximum sustainable context for optimal performance
**Method**: Research Claude Code context limits + calculate optimal allocation
**Deliverable**: Mathematical formula for context budget management

### 3. File Token Matrix
**ID**: `file-token-matrix`  
**Task**: Create mathematical matrix mapping all files to token/line counts
**Method**: Systematic measurement of all docs/ files with reference tracking
**Deliverable**: Spreadsheet/table with file‚Üítokens‚Üíreferences mapping

### 4. Precise Reference System
**ID**: `precise-reference-system`
**Task**: Design file:line reference system for efficient navigation
**Method**: Implement @file.md#line-N or similar precise targeting
**Deliverable**: Standard for referencing specific content without full loading

### 5. CLAUDE.md Diagnosis
**ID**: `claude-md-diagnosis`
**Task**: Analyze current CLAUDE.md for cognitive load issues
**Method**: Compare current vs optimal structure, identify bloat sources
**Deliverable**: Specific diagnosis of problems + remediation plan

### 6. Mathematical Validation Framework
**ID**: `mathematical-validation-framework`  
**Task**: Create algorithm to validate context load before file creation
**Method**: Token counting + cognitive load formulas + validation rules
**Deliverable**: Automated system preventing context overload

### 7. Context Optimization Rules
**ID**: `context-optimization-rules`
**Task**: Establish rules for maintaining optimal cognitive load
**Method**: Document standards based on mathematical analysis
**Deliverable**: Rule set for context economy management

### 8. Essential Files Prioritization
**ID**: `essential-files-prioritization`
**Task**: Identify minimum viable context for system operation
**Method**: Dependency analysis + usage frequency + criticality assessment  
**Deliverable**: List of 3-5 files that must be auto-loaded

## Dependencies

**Required Reading**: 
- Current CLAUDE.md (to understand existing problems)
- docs/rules/communication-rules.md (token economy rules)
- docs/core/development-principles.md (PTS framework for validation)

**Blocking Requirements**: None - this is foundational work

**Success Dependencies**: All 8 tasks must complete before any other handoffs

## Success Criteria

### Technical Metrics
- [ ] **Token Budget Defined**: Mathematical limits established
- [ ] **File Matrix Complete**: All files measured and mapped
- [ ] **Reference System Working**: Precise navigation implemented
- [ ] **Validation Framework Active**: Prevents context overload
- [ ] **Rules Documented**: Context economy standards established

### Behavioral Validation  
- [ ] **Consistent Responses**: LLM behavior stable throughout sessions
- [ ] **PTS Compliance**: Responses follow established principles consistently  
- [ ] **Token Efficiency**: Context usage optimized for value
- [ ] **Rule Adherence**: Communication rules followed automatically

## Next Steps After Completion

1. **Implement Optimized CLAUDE.md**: Using mathematical framework
2. **Update All Templates**: Apply context economy principles
3. **Proceed to Handoff 02**: Standards System (dependencies resolved)

## Critical Notes

**‚ö†Ô∏è DO NOT CREATE NEW FILES** until mathematical validation framework is complete. Every new file affects context budget.

**üîß Mathematical Focus**: This handoff requires precise calculations, not theoretical frameworks. Use actual measurements and formulas.

**üìä Evidence-Based**: All decisions must be supported by token counts and mathematical analysis.

---

**Handoff Context Preserved**: This represents 8 critical tasks extracted from 27-item TodoWrite to enable focused execution on fundamental system stability.